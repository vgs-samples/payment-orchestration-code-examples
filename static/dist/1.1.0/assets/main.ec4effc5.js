var Jt=Object.defineProperty,Xt=Object.defineProperties;var Qt=Object.getOwnPropertyDescriptors;var Be=Object.getOwnPropertySymbols;var ht=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable;var Ve=(e,t,r)=>t in e?Jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,m=(e,t)=>{for(var r in t||(t={}))ht.call(t,r)&&Ve(e,r,t[r]);if(Be)for(var r of Be(t))mt.call(t,r)&&Ve(e,r,t[r]);return e},F=(e,t)=>Xt(e,Qt(t));var _e=(e,t)=>{var r={};for(var n in e)ht.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&Be)for(var n of Be(e))t.indexOf(n)<0&&mt.call(e,n)&&(r[n]=e[n]);return r};var ce=(e,t,r)=>(Ve(e,typeof t!="symbol"?t+"":t,r),r),Ke=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var ge=(e,t,r)=>(Ke(e,t,"read from private field"),r?r.call(e):t.get(e)),Te=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},er=(e,t,r,n)=>(Ke(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ft=(e,t,r,n)=>({set _(o){er(e,t,o,r)},get _(){return ge(e,t,n)}}),gt=(e,t,r)=>(Ke(e,t,"access private method"),r);import{t as ke,d as tr,v as rr,m as nr,j as ar,a as or,f as sr,b as ir,u as cr,e as ne,c as lr,g as dr,T as ur,D as He,h as W,i as pr,k as hr,F as mr,p as De,l as de,A as Ie,n as fr,Z as gr,o as We,q as te,r as X,s as Xe,w as J,x as B,y as br,z as Qe,B as Re,C as Y,E as $t,R as Cr,G as vr,S as yr,H as xr}from"./vendor.93ccdf54.js";const Sr=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};Sr();function G(e){return e.length===0}function je(e){switch(e){case"":case"US":return"zipCode";default:return"postalCode"}}function et(e){if(e){const t=Lt(e.validCountries);return Object.keys(t)[0]||"US"}else return"US"}function Lt(e,t=Mt){if(!(e==null?void 0:e.length))return bt(t);const r=e.reduce((o,i)=>{const c=i.toUpperCase();return t[c]?F(m({},o),{[c]:t[c]}):o},{}),n=Object.keys(r);return(n==null?void 0:n.length)?r:bt(t)}function wr(e){const t=et(e);return je(t)}function bt(e=Mt){const t={};return Object.keys(e).sort((r,n)=>e[r].localeCompare(e[n])).forEach(r=>t[r]=e[r]),t}const Mt={AC:"Ascension Island",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua & Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"\xC5land Islands",AZ:"Azerbaijan",BA:"Bosnia & Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"St. Barth\xE9lemy",BM:"Bermuda",BN:"Brunei",BO:"Bolivia",BQ:"Caribbean Netherlands",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos [Keeling] Islands",CD:"Congo - Kinshasa",CF:"Central African Republic",CG:"Congo - Brazzaville",CH:"Switzerland",CI:"C\xF4te d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China mainland",CO:"Colombia",CP:"Clipperton Island",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xE7ao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czechia",DE:"Germany",DG:"Diego Garcia",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EA:"Ceuta & Melilla",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands",FM:"Micronesia",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"So. Georgia & So. Sandwich Isl.",GT:"Guatemala",GU:"Guam",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard & McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",IC:"Canary Islands",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"Chagos Archipelago",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"St. Kitts & Nevis",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Laos",LB:"Lebanon",LC:"St. Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova",ME:"Montenegro",MF:"St. Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"North Macedonia",ML:"Mali",MM:"Myanmar [Burma]",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre & Miquelon",PN:"Pitcairn Islands",PR:"Puerto Rico",PS:"Palestinian Territories",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"R\xE9union",RO:"Romania",RS:"Serbia",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"St. Helena",SI:"Slovenia",SJ:"Svalbard & Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"S\xE3o Tom\xE9 & Pr\xEDncipe",SV:"El Salvador",SX:"Sint Maarten",SY:"Syria",SZ:"Eswatini",TA:"Tristan da Cunha",TC:"Turks & Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad & Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania",UA:"Ukraine",UG:"Uganda",UM:"U.S. Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican City",VC:"St. Vincent & Grenadines",VE:"Venezuela",VG:"British Virgin Islands",VI:"U.S. Virgin Islands",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis & Futuna",WS:"Samoa",XK:"Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function le(e,t,r){return F(m({},e),{[t]:m(m({},e[t]),r)})}const Ir=e=>(t,r)=>{switch(r.type){case"focus":return le(t,r.field,{focused:!0});case"blur":return le(t,r.field,{focused:!1,touched:!0});case"valid":{let i={};const c=Object.keys(t);return Array.prototype.forEach.call(c,h=>{const d=t[h],s=e[h].validate(d.value,t);i[h]=F(m({},d),{focused:!1,touched:!0,value:d.value,empty:G(d.value),valid:!s,errorMessage:s,dirty:!0})}),i}case"change":{const i=e[r.field].validate(r.value,t);let c=le(t,r.field,{value:r.value,empty:G(r.value),valid:!i,errorMessage:i,dirty:!0});if(r.field==="country"){const h=e.postalCode.validate(c.postalCode.value,c);c=le(c,"postalCode",{valid:!h,errorMessage:h,localType:je(r.value)})}if(r.field==="cardNumber"){const h=e.cardCvc.validate(c.cardCvc.value,c);c=le(c,"cardCvc",{valid:!h,errorMessage:h})}return c}case"clearAll":{let i={};const c=Object.keys(r.value);return Array.prototype.forEach.call(c,h=>{let d=r.value[h];i[h]=F(m({},d),{mounted:!0})}),i}case"mount":return le(t,r.field,{mounted:!0});case"unmount":return le(t,r.field,{mounted:!1});case"clear":const n=e[r.field].validate("",t);return le(t,r.field,{errorMessage:void 0,dirty:!0,empty:!0,valid:!n,value:""});default:const o=`Unhandled action ${r} ${r==null?void 0:r.type} in fieldsReducer`;throw new Error(o)}};var V=(e=>(e.IDLE="IDLE",e.LOADING="LOADING",e.FAILED="FAILED",e.SUCCESS="SUCCESS",e))(V||{});function Nr(e,t){switch(t.type){case"request-start":return{state:V.LOADING,error:null,response:null};case"request-failed":return{state:V.FAILED,response:null,error:t.error};case"request-success":return{state:V.SUCCESS,response:t.response,error:null};case"reset":return{state:V.IDLE,response:null,error:null};default:{const r=`Unhandled action ${t} ${t==null?void 0:t.type} in submitReducer`;throw new Error(r)}}}function Ce(e){return e.replace(/\D/g,"")}const Ar=ke({name:"Elo",pattern:/^(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)\d{10}$/,eagerPattern:/(4011(78|79)|43(1274|8935)|45(1416|7393|763(1|2))|50(4175|6699|67[0-7][0-9]|9000)|627780|63(6297|6368)|650(03([^4])|04([0-9])|05(0|1)|4(0[5-9]|3[0-9]|8[5-9]|9[0-9])|5([0-2][0-9]|3[0-8])|9([2-6][0-9]|7[0-8])|541|700|720|901)|651652|655000|655021)/}),kr=ke({name:"Visa Electron",pattern:/^4(026\d{2}|17500|405\d{2}|508\d{2}|844\d{2}|91[37]\d{2})(\d{10})$/,eagerPattern:/^4(026|17500|405|508|844|91[37])/}),$r=ke({name:"Hipercard",cvcLength:3,eagerPattern:/^(384100|384140|384160|606282|637095|637568)/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/,pattern:/^(384100|384140|384160|606282|637095|637568)(\d{8,13})/,digits:[14,19],luhn:!0}),Lr=ke({name:"Discover",pattern:/^6(011|5\d{2}|4[4-9]\d|22\d)\d{12}$/,eagerPattern:/^6(011|5|4[4-9]|22)/}),Mr=ke({name:"Maestro",digits:[12,19],pattern:/^(?:5[06789]\d\d|(?!6011[0234])(?!60117[4789])(?!60118[6789])(?!60119)(?!64[456789])(?!65)6\d{3})\d{8,15}$/,eagerPattern:/^(5(018|0[23]|[6-8])|6[37]|60111|60115|60117([56]|7[56])|60118[0-5]|64[0-3]|66)/,groupPattern:/(\d{1,4})(\d{1,4})?(\d{1,4})?(\d{1,4})?(\d{1,3})?/}),Ct=[$r,tr,kr,rr,nr,Ar,ar,or,sr,ir,Lr,Mr,cr],Er=(e,t)=>r=>{const n=Ce(r);let o=n.slice(0,2),i=n.slice(2,6);i.length===4?i=i.slice(-t):i=i.slice(0,t);let c="";return+o>12?(c=o[1],o="_"+o[0]):o&&o[0]!=="0"&&o[0]!=="1"&&(o="_"+o[0]),i=`${c}${i}`.slice(0,t),r.endsWith(e)||i.length?o+e+i:o};var R=(e=>(e.empty="empty",e.cardNumberInvalid="cardNumberInvalid",e.cardNumberNotAllowed="cardNumberNotAllowed",e.cardSecurityCodeInvalid="cardSecurityCodeInvalid",e.cardExpirationDateInvalid="cardExpirationDateInvalid",e.postalCodeInvalid="postalCodeInvalid",e))(R||{});const Br={accept:/[a-zA-Z\s]/g,format:e=>(e.match(/[a-zA-Z\s]/g)||[]).join(""),validate:e=>G(e)?R.empty:void 0},vt={expSeparator:" / ",yearLength:2};function Tr(e=vt){const t=Object.entries(vt).reduce((s,[l,p])=>(typeof s[l]=="undefined"&&(s[l]=p),s),e||{}),r=lr(Ct),n=dr(Ct);function o(s){return ne.year.parse(s,t.yearLength===2)}function i(s){const l=ne.month.parse(s);return ne.month.isValid(l)}function c(s,l){const p=o(l),g=new Date,I=g.getFullYear()===p,N=ne.month.parse(s),k=ne.month.isValid(N);if(I){const $=g.getMonth()+1,L=N>$;return k&&L}return k}function h(s){const l=o(s);return ne.year.isValid(l)&&!ne.year.isPast(l)}function d(s,l){switch(s){case"US":return/^([0-9]{5})(?:-([0-9]{4}))?$/.test(l);case"GB":return/^[A-Z0-9]{1,4}\s?-?[A-Z0-9]{1,4}$/i.test(l);case"NZ":return/^\d{4}$/.test(l);case"CA":return/^([ABCEGHJKLMNPRSTVXY][0-9][ABCEGHJKLMNPRSTVWXYZ])\s*([0-9][ABCEGHJKLMNPRSTVWXYZ][0-9])$/i.test(l);case"AU":return/^\d{4}$/.test(l);default:return!0}}return{cardNumber:{format:s=>r.format(Ce(s)),validate:s=>{if(G(s))return R.empty;if(!r.isValid(Ce(s)))return R.cardNumberInvalid},cardType:s=>r.type(Ce(s),!0),clearWhitespace:s=>s.replace(/ /g,"")},cardHolder:Br,cardCvc:{format:s=>Ce(s).slice(0,4),validate:(s,l)=>{var I;if(G(s))return R.empty;const p=Ce((I=l==null?void 0:l.cardNumber.value)!=null?I:""),g=r.type(p,!0);return n.isValid(s,g)?void 0:R.cardSecurityCodeInvalid}},postalCode:{accept:/[A-Za-z0-9_.-]*/g,format:s=>s,validate:(s,l)=>{var g;if(G(s))return R.empty;const p=(g=l==null?void 0:l.country.value)!=null?g:"";if(!d(p,s))return R.postalCodeInvalid}},zipCode:{accept:/[A-Za-z0-9_.-]*/g,format:s=>s,validate:(s,l)=>{var g;if(G(s))return R.empty;const p=(g=l==null?void 0:l.country.value)!=null?g:"";if(!d(p,s))return R.postalCodeInvalid}},country:{format:s=>s,validate:s=>s&&G(s)?R.empty:void 0},address1:{accept:/[A-Za-z0-9_.-]*/g,format:s=>s,validate:s=>G(s)?R.empty:void 0},address2:{accept:/[A-Za-z0-9_.-]*/g,format:s=>s,validate:()=>{}},city:{accept:/[A-Za-z0-9_.-]*/g,format:s=>s,validate:s=>G(s)?R.empty:void 0},cardExp:{isMask:()=>!0,replace:s=>s.replace("_","0"),append:s=>s.length===2?`${s} / `:s,format:Er(t.expSeparator,t.yearLength),validate:s=>{if(G(s))return R.empty;let l=/(\d{2})( \/ )(\d{2})/;t.yearLength===4&&(l=/(\d{2})( \/ )(\d{4})/);const[p,g,I,N]=s.match(l)||[],k=c(g,N),$=h(N);if(!(k&&$))return R.cardExpirationDateInvalid},extractMonth:s=>{const[l]=s.split(t.expSeparator);if(i(l))return ne.month.parse(l)},extractYear:s=>{const[l,p]=s.split(t.expSeparator);if(h(p))return ne.year.parse(p,t.yearLength===2)}},saveCard:{format:s=>s,validate:s=>G(s)?R.empty:void 0}}}const Oe={card:["cardHolder","cardNumber","cardCvc","cardExp","saveCard"],billingAddress:["country","address1","address2","city","postalCode"]};var _=(e=>(e.SetInitialParams="SetInitialParams",e.UpdateParams="UpdateParams",e.SubmitSignal="SubmitSignal",e.ClearFields="ClearFields",e))(_||{});const K={JsLoaded:"JsLoaded",AppMounted:"AppMounted",FieldFocus:"FieldFocus",FieldBlur:"FieldBlur",FieldChange:"FieldChange",SubmitStart:"SubmitStart",SubmitFail:"SubmitFail",SubmitSuccess:"SubmitSuccess",GetSubmitDataSignal:"GetSubmitDataSignal",WindowHeightChange:"WindowHeightChange",RemoveCard:"RemoveCard"},Et="vgs";var fe,Ue,Pe,Dr;class Fr{constructor(t,r,n){Te(this,Pe);Te(this,fe,new ur);Te(this,Ue,0);this.getReplyToWindow=r,this.replyToOrigin=n,window.addEventListener("message",o=>{if(t(o)){const i=m({},o.data);i.replyWithType&&(i.reply=c=>{this.sendMessage(F(m({},c),{type:i.replyWithType}))}),ge(this,fe).emit(o.data.type,i)}})}on(t,r){ge(this,fe).on(t,r)}off(t,r){ge(this,fe).off(t,r)}once(t,r){ge(this,fe).once(t,r)}sendMessage(t){const r=this.getReplyToWindow();r==null||r.postMessage(F(m({},t),{origin:Et}),this.replyToOrigin)}remoteExecute(t){const r=gt(this,Pe,Dr).call(this);return new Promise(n=>{this.once(r,n),this.sendMessage(F(m({},t),{replyWithType:r}))})}}fe=new WeakMap,Ue=new WeakMap,Pe=new WeakSet,Dr=function(){return`${++ft(this,Ue)._}.${new Date().toJSON()}`};const M=new Fr(e=>e.data&&e.data.origin===Et,()=>window.parent,"*"),Bt=He(null),U=Object.freeze({PROD:{}.PROD,DEV:{}.DEV,vaultHost:"verygoodproxy.com",checkoutOrigin:"http://localhost:5000/static/dist",iframePath:"/1.1.0/",collectKeeperUrl:"https://vgs-collect-keeper.apps.verygood.systems",rollbarAccessToken:"f3cc89bd5b9446a9a6d1fdd8ebaf5425",version:"1.1.0",iconsUrl:"https://js.verygoodvault.com/vgs-collect/icons"});function w(){const e=W(Bt);if(!U.PROD&&!e)throw new Error("Config was accessed outside of the ConfigController");return e}const a=pr,b=hr,ie=mr,Tt={list:[]},Rr=(e,t)=>{switch(t.type){case"SET_CARDS_LIST":return F(m({},e),{list:t.value});default:return e}},Ft=He({state:Tt,dispatch:()=>null}),Or=({children:e})=>{const[t,r]=De(Rr,Tt);return a(Ft.Provider,{value:{state:t,dispatch:r},children:e})},ve=He(null),$e=He(null),Ur={state:V.IDLE,error:null,response:null},Ye={country:{value:"US",valid:!0},postalCode:{localType:"zipCode"}};function Pr(e,t){return t.reduce((r,n)=>{const o=e[n].validate("",null),i=m({value:"",touched:!1,focused:!1,dirty:!1,empty:!0,mounted:!1,errorMessage:o,valid:o===void 0},Ye[n]);return r[n]=i,r},{})}function Hr(e){const t={},r=Object.keys(e);Array.prototype.forEach.call(r,o=>{const i=e[o];o!=="saveCard"&&(t[o]=i)});const n=Object.values(t).filter(o=>o.mounted);return n.length>0&&n.every(o=>o.valid)}const jr={focus:K.FieldFocus,blur:K.FieldBlur,change:K.FieldChange,clear:K.FieldChange};function zr(e){switch(e.type){case"clear":case"focus":case"blur":case"change":return{type:jr[e.type],field:e.field};default:return null}}function Gr({children:e}){var $,L;const t=w(),{billingAddress:r,billingAddressConfiguration:n}=t,o=r?Oe.billingAddress:[],i=[...Oe.card,...o],c=et(n),h=wr(n);n&&(($=Object.keys(n))==null?void 0:$.length)&&Object.keys(n).forEach(A=>{var E;(E=n[A])==null?void 0:E.visible}),Ye.country.value=c,Ye.postalCode.localType=h;const[d]=de(()=>Tr(t)),[s,l]=De(Ir(d),d,()=>Pr(d,i));n&&((L=n==null?void 0:n.country)==null?void 0:L.visible)===!1&&(s.country.value="");const[p,g]=De(Nr,Ur),I=Ie(()=>Hr(s),[s]),N=fr(A=>{const E=zr(A);return E&&M.sendMessage(E),l(A)},[]),k=Ie(()=>({valid:I,fields:s,submit:p,dispatchFieldAction:N,dispatchSubmitAction:g}),[I,s,p]);return a($e.Provider,{value:d,children:a(ve.Provider,{value:k,children:a(Or,{children:e})})})}const{css:f,theme:Vr,global:_r,keyframes:Dt}=gr({theme:{colors:{formBg:"#FFFFFF",placeholder:"rgba(0, 0, 0, 0.38)",formControlBg:"#fff",fieldDisabledBg:"#F9FAFB",input:"#293846",label:"rgba(0, 0, 0, 0.87)",border:"#C8D0DB",submit:"#1565C0",errorMessage:"#DA3510",ctaButtonBg:"#1565C0",ctaText:"#fff",paymentBtn:"#000"},shadows:{inputBorder:"inset 0 0 0 1px rgba(0, 0, 0, 0.38)",inputBorderInvalid:"inset 0 0 0 1px #ffa3a3",inputBorderActive:"inset 0 0 0 1px #1565C0",submitActive:"none",submitDisabled:"none",cardControlActive:"inset 0 0 0 1px rgba(0, 122, 255, 1)"},borderStyles:{base:"solid"},borderWidths:{0:"0px",1:"1px",2:"2px"},radii:{sm:"4px",md:"8px"},fonts:{base:"'Roboto', sans-serif"},fontWeights:{thin:"100",extraLight:"200",light:"300",normal:"400",medium:"500",semiBold:"600",bold:"700",extraBold:"800"},fontSizes:{sm:"12px",md:"14px",lg:"16px"},lineHeights:{base:"170%",1:"4px",2:"8px",3:"16px",4:"24px",5:"40px"},space:{0:"0",1:"4px",2:"8px",3:"16px",4:"24px",5:"40px"},transitions:{base:"all 0.2s ease"}}}),Kr={cardLabel:"Card Details",billingAddressLabel:"Billing Address",backLabel:"Pay with new card",addCardLabel:"Pay with new card"},Wr={label:"Name on card",placeholder:"Joe Business"},Yr={label:"Card number",placeholder:"1234 1234 1234 1234"},Zr={label:"CVC/CVV",placeholder:"123",placeholderCvc:"123",placeholderCvv:"123"},qr={label:"EXPIRY DATE",placeholder:"MM / YY"},Jr={ctaLabel:"Pay",processingLabel:"Payment Processing...",success:{label:"Success!",message:`Your payment has been received.
Thank you!`},error:{label:"Error!",message:"Your payment failed"}},Xr={title:"Payment method"},Qr={label:"Postal Code",placeholder:"Postal Code"},en={label:"Zip Code",placeholder:"Zip Code"},tn={label:"Country",placeholder:""},rn={label:"Address line 1",placeholder:"Address Line 1"},nn={label:"Address line 2 (optional)",placeholder:"Address Line 2 (optional)"},an={label:"City",placeholder:"City"},on={label:"Save Card"},sn={empty:"{fieldName} is empty",cardNumberInvalid:"Enter a valid card number",cardNumberNotAllowed:"This card number is not allowed",cardSecurityCodeInvalid:"Security code is not valid",cardExpirationDateInvalid:"Expiration date is not valid",postalCodeInvalid:"{fieldName} is not valid"};var yt={form:Kr,cardHolder:Wr,cardNumber:Yr,cardCvc:Zr,cardExp:qr,submit:Jr,cardsList:Xr,postalCode:Qr,zipCode:en,country:tn,address1:rn,address2:nn,city:an,saveCard:on,errorMessages:sn};function cn(e,t){const r=t.split(".");let n=e;for(;r.length;)if(Array.isArray(n)||n&&typeof n=="object"){const o=r.shift();n=n[o]}else return;return n}function v(e,t={}){const{labels:r}=w(),n=Ie(()=>r?We(yt,r):yt,[r]);let o=cn(n,e);return o=o.replace(/{[^@$}]+}/g,i=>t[i.slice(1,-1)]),o}const ln=()=>a("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 20C0 8.9543 8.9543 0 20 0C31.0404 0.0128579 39.9871 8.95963 40 20C40 31.0457 31.0457 40 20 40C8.9543 40 0 31.0457 0 20ZM20.1367 29.1483L31.545 13.6667C31.9307 13.1893 32.0228 12.5386 31.7848 11.973C31.5469 11.4073 31.0173 11.0182 30.4063 10.9601C29.7954 10.902 29.202 11.1843 28.8617 11.695L18.4833 25.78L11.69 20.345C10.9711 19.7697 9.92196 19.8861 9.34667 20.605C8.77137 21.3239 8.88778 22.373 9.60667 22.9483L17.7533 29.4617C18.1095 29.7401 18.5625 29.8637 19.0107 29.8048C19.4589 29.7458 19.8646 29.5093 20.1367 29.1483Z",fill:"#1FAD81"})}),dn=f({textAlign:"center",height:"100vh",maxHeight:"400px",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",h1:{marginBottom:"$5"},p:{marginBottom:"$5",whiteSpace:"pre-wrap"},span:{display:"block",marginBottom:"$5"}});function un({formClassName:e}){const t=w(),r=v("submit.success.label"),n=v("submit.success.message");return a("div",{className:`${e} ${dn({css:m({},t.style.submitSuccessView)})}`,"data-testid":"form-success",children:b("div",{children:[a("h1",{children:r}),a("span",{children:a(ln,{})}),a("p",{children:n})]})})}const Rt=()=>a("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a("path",{d:"M7.00016 0.333344C3.32016 0.333344 0.333496 3.32001 0.333496 7.00001C0.333496 10.68 3.32016 13.6667 7.00016 13.6667C10.6802 13.6667 13.6668 10.68 13.6668 7.00001C13.6668 3.32001 10.6802 0.333344 7.00016 0.333344ZM7.00016 7.66668C6.6335 7.66668 6.3335 7.36668 6.3335 7.00001V4.33334C6.3335 3.96668 6.6335 3.66668 7.00016 3.66668C7.36683 3.66668 7.66683 3.96668 7.66683 4.33334V7.00001C7.66683 7.36668 7.36683 7.66668 7.00016 7.66668ZM7.66683 10.3333H6.3335V9.00001H7.66683V10.3333Z",fill:"#DA3510"})}),pn=f({textAlign:"center",height:"100vh",maxHeight:"400px",boxSizing:"border-box",display:"flex",justifyContent:"center",alignItems:"center",h1:{marginBottom:"$5"},p:{marginBottom:"$5",whiteSpace:"pre-wrap"},span:{display:"block",marginBottom:"$5"},svg:{width:"40px",height:"40px"}});function hn({formClassName:e}){const t=w(),r=v("submit.error.label"),n=v("submit.error.message");return a("div",{className:`${e} ${pn({css:m({},t.style.submitErrorView)})}`,"data-testid":"form-error",children:b("div",{children:[a("h1",{children:r}),a("span",{children:a(Rt,{})}),a("p",{children:n})]})})}var ue=(e=>(e.PAYOPT="payopt",e.CUSTOM="custom",e))(ue||{}),Q=(e=>(e.INIT="Init",e.SUBMIT="Submit",e.JWT_VALIDATION="JWTValidation",e.BEFORE_SUBMIT="BeforeSubmit",e.FIN_INSTRUMENT="FinInstrument",e))(Q||{}),Se=(e=>(e.CREATE_FIN_INSTRUMENT="CreateFinInstrument",e.LOAD_FIN_INSTRUMENTS="LoadFinInstruments",e.DELETE_FIN_INSTRUMENT="DeleteFinInstrument",e))(Se||{}),ee=(e=>(e.OK="Ok",e.FAILED="Failed",e))(ee||{}),we=(e=>(e.CUSTOM_HOSTNAME="custom_hostname",e.CUSTOM_DATA="custom_data",e.CUSTOM_HEADER="custom_header",e.CUSTOM_COUNTRIES="valid_countries",e))(we||{}),H=(e=>(e.DEFAULT="default",e.CARD_LIST="card-list",e.SUCCESS="success",e.LOADING="loading",e.ERROR="error",e))(H||{});const Ot=e=>e==null?void 0:String(e),xe=te({visible:X.optional(!0)}),mn=te.either({validCountries:Xe.of(J).min(1).optional(),country:xe,address1:xe,address2:xe,city:xe,postalCode:xe}),Ut=te({vaultId:J.optional(),tenantId:J,environment:J,submitPath:J.optional("/financial_instruments"),billingAddress:te.either(mn,X).optional(!1),billingAddressConfiguration:B,accessToken:Ot,formStatus:J.optional("default"),isSavedCards:X.optional(!1),cardsList:Xe.optional(),isSaveCardOptionEnabled:X.optional(!1)}),fn=te.merge(Ut,{cardsList:Xe.optional()});Ut.destruct();fn.destruct();const gn=te({colors:B.object().optional(),shadows:B.object().optional(),borderStyles:B.object().optional(),borderWidths:B.object().optional(),fonts:B.object().optional(),fontWeights:B.object().optional(),fontSizes:B.object().optional(),lineHeights:B.object().optional(),space:B.object().optional(),transitions:B.object().optional(),radii:B.object().optional(),labels:B.object().optional()}),C=B.object().optional(),bn=te({global:te({"@font-face":B.object().optional()}).optional(),root:C,baseInput:C,baseCheckbox:C,baseFormControl:C,cardholderSplitNameContainer:C,cardHolderControl:C,cardNumberControl:C,cardCvcAndExpContainer:C,cardExpControl:C,cardCvcControl:C,countryControl:C,address1Control:C,address2Control:C,cityControl:C,postalCodeControl:C,saveCardTitleControl:C,saveCardCheckboxControl:C,cityAndPostalCodeControl:C,form:C,fieldset:C,legend:C,errorMessage:C,submitButton:C,submitIconContainer:C,submitSuccessView:C,submitErrorView:C,cardsListView:C,newCardButtonControl:C,cardListTitleControl:C,removeCardControl:C,savedCardItemControl:C,cardsListTitleControl:C}),Cn=te({accessToken:Ot,theme:gn.optional(void 0),labels:B.object().optional(void 0),style:bn.optional({}),preventSubmitOnEnter:X.optional(!1),hasCustomBodyCallback:X.optional(!1),headers:B.object().optional({}),withCredentials:X.optional(!1),method:J.optional(void 0),formStatus:J.optional("default"),isSavedCards:X.optional(!1)}),vn=te({submitPath:J.optional(),hasCustomBodyCallback:X.optional(!1),headers:B.object().optional({}),withCredentials:X.optional(!1),method:J.optional(void 0)});Cn.destruct();vn.destruct();const ae=br.parse(window.location.search,{ignoreQueryPrefix:!0});function yn({billingAddress:e}){return typeof e=="string"?e==="true"||!1:typeof e=="object"}function xn({billingAddressConfiguration:e}){if(typeof e=="object")return e}function Le(){return{cardsList:[],updateConfig:()=>{},environment:ae.environment,tenantId:ae.tenantId,accessToken:ae.accessToken,submitPath:ae.submitPath,formId:ae.formId,createdAt:ae.createdAt,configResolved:!1,billingAddress:yn(ae),billingAddressConfiguration:xn(ae),style:{},isSavedCards:!1,formStatus:ae.formStatus||H.DEFAULT,isSaveCardOptionEnabled:!1}}const Sn=`${U.collectKeeperUrl}/vgs`,wn=()=>{var t;const e=window.navigator;return(t=e==null?void 0:e.connection)==null?void 0:t.downlink},In=e=>{const{tenantId:t,environment:r,formId:n}=Le(),o=wn(),i=new Date;return m(m({formId:n,env:r,tnt:t,source:"checkout-js",version:U.version,userAgent:navigator.userAgent,localTimestamp:i.getTime(),clientTimestamp:i.toISOString()},o?{internetSpeed:o}:null),e)},Nn=e=>{let t=null;try{t=window.btoa(unescape(encodeURIComponent(JSON.stringify(e))))}catch{}return t},se=e=>{if(!U.PROD)return;const t=In(e),r=Nn(t);!r||Qe({method:"POST",url:Sn,data:r}).catch(n=>{})};function Ze(e){const t=typeof e=="number"?e:parseInt(e,10);return Date.now()-t}function An(e){const t=Re(e);return Y(()=>{t.current=e}),t}function ze(e){return Boolean(e&&typeof e=="object"&&!Array.isArray(e))}var Pt=(e=>(e.cardHolder="cardHolder",e.cardNumber="cardNumber",e.cardCvc="cardCvc",e.cardExp="cardExp",e.expMonth="expMonth",e.expYear="expYear",e.country="country",e.address1="address1",e.address2="address2",e.city="city",e.postalCode="postalCode",e.zipCode="zipCode",e.saveCard="saveCard",e))(Pt||{});function kn(e){return e.___type==="vgs-key"&&Object.keys(Pt).includes(e.key)}function P(e){return{___type:"vgs-key",key:e}}const z={cardHolder:P("cardHolder"),cardNumber:P("cardNumber"),cardCvc:P("cardCvc"),cardExp:P("cardExp"),expMonth:P("expMonth"),expYear:P("expYear"),country:P("country"),address1:P("address1"),address2:P("address2"),city:P("city"),postalCode:P("postalCode"),zipCode:P("zipCode"),saveCard:P("saveCard")};function qe(e,t){if(ze(e))if(kn(e)){const r=t[e.key];return!r.mounted||!r.value?void 0:r.value}else return Object.entries(e).reduce((r,[n,o])=>(r[n]=qe(o,t),r),{});else return Array.isArray(e)?e.map((r,n)=>qe(r,t)):e}function $n(e,t,r){const n=e.cardExp.value,o=e.cardNumber.value,i=t.cardExp.extractMonth(n),c=t.cardExp.extractYear(n),h=F(m({},e),{cardNumber:F(m({},e.cardNumber),{value:String(t.cardNumber.clearWhitespace(o))}),expMonth:F(m({},e.cardExp),{value:Number(i)}),expYear:F(m({},e.cardExp),{value:Number(c)})});if(ze(r)||Array.isArray(r))return qe(r,h);throw new Error("Body structure is invalid, should be an object or an array")}async function Ln(){return M.remoteExecute({type:K.GetSubmitDataSignal}).then(e=>e.body)}const Mn=({className:e})=>a("svg",{width:"16",height:"16",className:e,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a("path",{d:"M8.00001 15.1037C8.00001 15.6118 7.58674 16.0292 7.08199 15.9709C5.61476 15.8014 4.21654 15.228 3.04725 14.3062C1.63608 13.1937 0.640536 11.6386 0.221047 9.89125C-0.198443 8.14395 -0.01745 6.3063 0.734862 4.67441C1.48717 3.04252 2.76699 1.71144 4.36808 0.895639C5.96918 0.0798402 7.79831 -0.173158 9.56073 0.17741C11.3232 0.527978 12.9162 1.4617 14.0833 2.82811C15.2503 4.19452 15.9233 5.91405 15.9938 7.70962C16.0523 9.19741 15.6943 10.6656 14.969 11.9522C14.7195 12.3948 14.1389 12.4839 13.7278 12.1852C13.3168 11.8866 13.2327 11.3135 13.4668 10.8626C13.9576 9.91756 14.1975 8.85634 14.1553 7.78185C14.1009 6.39927 13.5827 5.07523 12.6841 4.02309C11.7855 2.97096 10.5588 2.25199 9.20177 1.98205C7.8447 1.71212 6.43627 1.90693 5.20343 2.53509C3.97058 3.16326 2.98512 4.18819 2.40584 5.44475C1.82657 6.7013 1.6872 8.11629 2.01021 9.46171C2.33321 10.8071 3.09978 12.0046 4.18639 12.8612C5.03085 13.527 6.03039 13.9567 7.0834 14.1151C7.58584 14.1907 8.00001 14.5956 8.00001 15.1037Z",fill:"white"})}),En=Dt({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),Bn=f({verticalAlign:"middle",animationName:`${En}`,animationDuration:"2000ms",animationIterationCount:"infinite",animationTimingFunction:"linear"}),Tn=f({marginRight:"$2",display:"inline-flex",alignItems:"center",justifyContent:"center"});function Fn(){return a("span",{"data-testid":"loading",class:Tn(),children:a(Mn,{"aria-hidden":!0,className:Bn()})})}const Dn=f({width:"100%",padding:"$2",display:"flex",justifyContent:"center",alignItems:"center",marginTop:"$2",border:"none",borderRadius:"$sm",background:"$ctaButtonBg",cursor:"pointer",textTransform:"uppercase",fontSize:"$md",lineHeight:"$base",fontWeight:"$bold",fontFamily:"$base",color:"$ctaText",boxShadow:"$submitActive","&:disabled":{opacity:"0.4",cursor:"default",boxShadow:"$submitDisabled"},height:"48px"});function Ht({disabled:e=!1}){const{submit:t}=W(ve),{style:r,formStatus:n}=w(),o=t.state===V.LOADING||n===H.LOADING,i=v(o?"submit.processingLabel":"submit.ctaLabel"),c=()=>o?a(Fn,{}):a(ie,{});return b("button",{type:"submit",className:Dn({css:r.submitButton}),"data-testid":"submit-btn",disabled:e,children:[a(c,{}),a("span",{children:i})]})}const Rn=()=>a("svg",{width:"32",height:"20",viewBox:"0 0 32 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:b("g",{opacity:"0.54",children:[a("rect",{x:"0.25",y:"0.25",width:"31.5",height:"19.5",rx:"2.75",stroke:"currentColor","stroke-width":"0.5"}),a("rect",{x:"2",y:"3",width:"6",height:"5",rx:"1",fill:"currentColor"}),a("rect",{x:"24",y:"13",width:"6",height:"4",rx:"1",fill:"currentColor"}),a("rect",{x:"2",y:"10",width:"28",height:"2",rx:"1",fill:"currentColor"}),a("rect",{x:"2",y:"14",width:"7",height:"2",rx:"1",fill:"currentColor"}),a("rect",{x:"11",y:"14",width:"7",height:"2",rx:"1",fill:"currentColor"})]})}),On=f({display:"inline-flex","& svg":{width:"32px",height:"20px"},width:"32px",height:"20px",paddingRight:"$2"});function jt({value:e,icons:t,children:r,className:n}){const o=`${On()} ${n}`;if(e&&t[e]){const i=`${U.iconsUrl}/${t[e]}.svg`;return a("img",{src:i,className:o,alt:""})}return a("span",{className:o,children:r})}const Ne={CARD_ICONS:{Visa:"visa","Visa Electron":"visa-electron","American Express":"amex",Maestro:"maestro",Mastercard:"mastercard","Union Pay":"unionpay",Meeza:"meeza",JCB:"jcb",Hipercard:"hipercard",Forbrugsforeningen:"forbrugsforeningen",Elo:"elo",Discover:"discover","Diners Club":"diners-club",Dankort:"dankort"},CVV_ICON_FRONT:{"American Express":"cvv-front"}};function Un(e){return tt[e]}const tt={cardHolder:"cc-name",cardNumber:"cc-number",cardCvc:"cc-cvc",cardExp:"cc-exp",country:"country",address1:"address-line-1",address2:"address-line-2",city:"city",postalCode:"postal-code",zipCode:"zip-code",saveCard:"save-card"},Pn=()=>b("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("path",{d:"M3 6H5H21",stroke:"#AEAEB2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),a("path",{d:"M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:"#AEAEB2","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),Hn=f({position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"20","& .wrapper":{width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"},"& .modal-wrapper":{backgroundColor:"white",border:"1px solid rgba(0,0,0,0.08)",transition:"all .8s",width:"280px",borderRadius:"4px",height:"160px",padding:"16px, 8px, 8px, 24px"},"& .modal-body":{padding:"0 24px 20px",color:"rgba(0, 0, 0, 0.87)",fontSize:"14px",lineHeight:"20px"},"& .modal-header":{padding:"24px 24px 12px 24px",fontSize:"16px",lineHeight:"24px"},"& .modal-footer":{width:"calc(100% - 48px)",padding:"0 24px 24px",textAlign:"end","& button":{background:"none",color:"inherit",border:"none",padding:0,font:"inherit",cursor:"pointer",outline:"inherit","&:first-child":{marginRight:"15px",color:"rgba(21, 101, 192, 1)"},"&:last-child":{color:"rgba(218, 53, 16, 1)"}}}}),jn=e=>e.show?a("div",{className:Hn(),children:a("div",{className:"wrapper",onClick:e.close,children:b("div",{className:"modal-wrapper",onClick:t=>t.stopImmediatePropagation(),children:[b("div",{className:"modal-header",children:["Remove this card \u2022\u2022\u2022\u2022 ",e.item.number.slice(-4),"?"]}),a("div",{className:"modal-body",children:"Are you sure you want to remove this card?"}),b("div",{className:"modal-footer",children:[a("button",{onClick:e.close,children:"Cancel"}),a("button",{onClick:e.onDelete,children:"Remove"})]})]})})}):null,zn=Dt({"0%":{backgroundColor:"hsl(200, 20%, 70%)"},"100%":{backgroundColor:"hsl(200, 20%, 85%)"}}),Gn=f({opacity:.7,display:"flex",alignItems:"center",height:"100%",justifyContent:"space-between",width:"100%",borderRadius:"$sm",color:"$border","& .wrapper":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"100%",backgroundColor:"$formControlBg",borderRadius:"$sm",flexGrow:1,padding:"0 $3",border:"1px solid $border",flexDirection:"row-reverse"},"& .animated":{animation:`${zn} 1s linear infinite alternate`},"& .card-details":{display:"flex",alignItems:"center"},"& .card-info":{display:"flex",flexDirection:"column","&-name":{width:"100%",height:"10px",backgroundColor:"hsl(200, 20%, 70%)",marginBottom:"5px",marginTop:"5px"},"& figure":{margin:0,display:"inline-flex",marginRight:"5px"}},"& .card-icon":{width:"30px",height:"20px",marginRight:"$3",backgroundColor:"hsl(200, 20%, 70%)",borderRadius:"3px"},"& .card-remove":{display:"flex",alignItems:"center",justifyContent:"center",width:"60px",height:"100%",marginLeft:"$3",backgroundColor:"$formControlBg",border:"1px solid $border",borderRadius:"$sm","& span":{width:"28px",height:"28px",backgroundColor:"hsl(200, 20%, 70%)",borderRadius:"50%"}},"& .card-checkbox":{width:"20px",height:"20px",backgroundColor:"hsl(200, 20%, 70%)",borderRadius:"50%"},"& .numbers":{width:"40px",height:"10px",backgroundColor:"hsl(200, 20%, 70%)",display:"inline-flex"},"@keyframes slideRight":"from:{opacity: 0}, to:{opacity: 1}"}),Vn=function(){return b("div",{className:Gn(),children:[b("div",{className:"wrapper",children:[a("div",{className:"card-checkbox animated"}),b("div",{className:"card-details",children:[a("div",{className:"card-icon animated"}),b("div",{className:"card-info",children:[a("span",{className:"card-info-name animated"}),b("span",{children:[a("figure",{children:"\u2022\u2022\u2022\u2022"}),b("span",{children:[a("i",{className:"numbers animated"})," ",a("span",{children:"|"})," ",a("i",{className:"numbers animated"})]})]})]})]})]}),a("div",{className:"card-remove",children:a("span",{className:"animated"})})]})};function _n({tenantId:e,environment:t,cname:r}){return typeof r=="string"&&r.length?r.trim():"https://payments.sandbox.verygoodsecurity.app"}function Kn(e){return e.startsWith("/")?e:`/${e}`}function zt(e){return`${_n(e)}${Kn(e.path)}`}function Wn(e){if(e.isSavedCards&&e.formStatus===H.CARD_LIST)return new Promise((c,h)=>{c({data:{data:e.body}})});const{accessToken:t}=Le(),r=zt({cname:window.vaultUrl,path:e.path,tenantId:e.tenantId,environment:e.environment}),n={"VGS-Client":`source=checkout-js&medium=vgs-checkout&content=${U.version}`};let o={};t&&(o={Authorization:`Bearer ${t}`});const i={method:(e==null?void 0:e.method)||"POST",url:r,data:m({},e.body),withCredentials:e.withCredentials,headers:m(m(m({},o),e.headers),n)};return Qe(i)}function xt(e){const{accessToken:t}=Le(),r=zt({cname:window.vaultUrl,path:e.path,tenantId:e.tenantId,environment:e.environment}),n={"VGS-Client":`source=checkout-js&medium=vgs-checkout&content=${U.version}`};let o={};t&&(o={Authorization:`Bearer ${t}`});const i={method:e==null?void 0:e.method,url:r,data:m({},e.body),withCredentials:e.withCredentials,headers:m(m(m({},o),e.headers),n)};return Qe(i)}function Yn(e){return typeof e=="string"||e instanceof String}const Zn=f({position:"relative",borderRadius:"$md",padding:"$3 $3 $5",backgroundColor:"$formBg"}),qn=f({lineHeight:"30px",fontWeight:"$medium",fontSize:"20px",color:"$label",marginBottom:"$5"}),Jn=f({display:"flex",alignItems:"center",height:"60px",padding:"0 $3",backgroundColor:"$formControlBg",width:"100%",borderRadius:"$sm",border:"1px solid $border",cursor:"pointer",fontSize:"$sm",lineHeight:"20px",color:"rgba(0, 122, 255, 1)",textTransform:"uppercase",fontWeight:"500","& svg":{marginRight:"10px"},marginBottom:"32px","&:hover":{opacity:".8"}}),St=f({display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"$3",height:"60px"}),Xn=f({display:"flex",alignItems:"center",justifyContent:"space-between"}),Qn=f({display:"flex",alignItems:"center",justifyContent:"space-between",height:"100%",backgroundColor:"$formControlBg",borderRadius:"$sm",flexGrow:1,padding:"0 $3",border:"1px solid $border",flexDirection:"row-reverse","& .checkbox-container":{position:"relative",userSelect:"none","& input":{position:"absolute",opacity:0,cursor:"pointer",height:0,width:0},"& input:checked + .checkmark":{display:"flex",backgroundColor:"#2196F3",borderColor:"#2196F3"},"& input:not(:checked) + .checkmark":{display:"flex",backgroundColor:"white","&::after":{display:"none"}},"& .checkmark":{height:"20px",width:"20px",backgroundColor:"white",borderRadius:"50%",boxSizing:"border-box",border:"2px solid #ccc","&::after":{content:"",position:"absolute",left:"7px",top:"4px",width:"4px",height:"8px",border:"solid white",borderWidth:"0 3px 3px 0","-webkit-transform":"rotate(45deg)","-ms-transform":"rotate(45deg)",transform:"rotate(45deg)"}}}}),ea=f({display:"flex",alignItems:"center",justifyContent:"center",width:"60px",height:"100%",marginLeft:"$3",backgroundColor:"$formControlBg",border:"1px solid $border",borderRadius:"$sm",cursor:"pointer"}),ta=f({boxShadow:"$cardControlActive"}),ra=f({paddingRight:"$3"}),na=f({display:"flex",flexDirection:"column","& span:first-child":{fontWeight:"$bold",fontSize:"12px",lineHeight:"20px",textTransform:"uppercase"},"& span:last-child":{fontSize:"$lg",lineHeight:"28px",fontWeight:500,color:"rgb(174, 174, 178)","& figure":{margin:0,display:"inline-flex"}}});function wt({formClassName:e,setSavedCard:t}){const r=w(),n=v("cardsList.title"),o=v("form.addCardLabel"),{updateConfig:i,cardsList:c}=r,[h]=de(!!(c==null?void 0:c.length)),[d,s]=de(!h),[l,p]=de(""),[g,I]=de({}),N=()=>{t({}),i({params:{formStatus:"default"}})},{cardNumber:k}=W($e),{state:$,dispatch:L}=W(Ft),{list:A}=$;Y(()=>{c||N(),(c==null?void 0:c.length)===0&&N()},[c==null?void 0:c.length]);const E=u=>{I(u),t(u)},O=(u,x)=>(u.preventDefault(),y(x).then(()=>{M.sendMessage({type:K.RemoveCard,data:A.find(T=>T.id===x)}),L({type:"SET_CARDS_LIST",value:A.filter(T=>T.id!==x)}),se({type:Q.FIN_INSTRUMENT,method:Se.DELETE_FIN_INSTRUMENT,config:ue.PAYOPT,status:ee.OK});const D=c.filter(T=>T!==x);i({params:{cardsList:D}}),x===(g==null?void 0:g.id)&&I({})}).catch(D=>{var T;se({type:Q.FIN_INSTRUMENT,method:Se.DELETE_FIN_INSTRUMENT,config:ue.PAYOPT,error:D.message,status:ee.FAILED,statusCode:(T=D.response)==null?void 0:T.status})}));function re(u){return xt({path:`financial_instruments/${c[u]}`,environment:r.environment,tenantId:r.tenantId,method:"GET"})}function y(u){return xt({path:`financial_instruments/${u}`,environment:r.environment,tenantId:r.tenantId,method:"DELETE"})}return Y(()=>{h&&!A.length&&(s(!0),Promise.allSettled(c.map((u,x)=>re(x))).then(u=>{const x=u.length,D=u.filter(j=>j.status!=="rejected").map(j=>j==null?void 0:j.value.data.data),T=u.length-D.length;L({type:"SET_CARDS_LIST",value:D}),se({type:Q.FIN_INSTRUMENT,method:Se.LOAD_FIN_INSTRUMENTS,totalCount:x,failedCount:T,config:ue.PAYOPT,status:ee.OK})}).catch(u=>{se({type:Q.FIN_INSTRUMENT,method:Se.LOAD_FIN_INSTRUMENTS,config:ue.PAYOPT,status:ee.FAILED})}).finally(()=>{s(!1)}))},[]),b("div",{className:`${e} ${Zn({css:m({},r.style.cardsListView)})}`,children:[a("div",{className:qn({css:m({},r.style.cardsListTitleControl)}),children:n}),d?c==null?void 0:c.map(()=>a("div",{className:St(),children:a(Vn,{})})):A.map(u=>{const x=Yn(u.card.number)?u.card.number.slice(-4):void 0;return b("div",{className:St(),children:[b("label",{className:`${Qn({css:m({},r.style.savedCardItemControl)})} ${u.id===(g==null?void 0:g.id)?ta():""}`,children:[b("span",{className:"checkbox-container",children:[a("input",{name:"cardsList",type:"radio",onChange:()=>E(u),checked:u.id===(g==null?void 0:g.id)}),a("span",{className:"checkmark"})]}),b("div",{className:Xn(),children:[a(jt,{value:k.cardType(u.card.number),icons:Ne.CARD_ICONS||Ne[u.card.brand],className:ra()}),b("div",{className:na(),children:[a("span",{children:u.card.name}),b("span",{children:[a("figure",{children:"\u2022\u2022\u2022\u2022"})," ",x," |"," ",`${("0"+u.card.exp_month).slice(-2)}/${String(u.card.exp_year).slice(-2)}`]})]})]})]}),a("div",{className:ea({css:m({},r.style.removeCardControl)}),onClick:()=>{p(u.id)},children:a(Pn,{})}),a(jn,{className:"modal",show:l===u.id,close:()=>p(""),onDelete:D=>O(D,l),item:u.card})]})}),b("button",{onClick:N,className:Jn({css:m({},r.style.newCardButtonControl)}),children:[a(Rn,{}),a("span",{children:o})]}),a(Ht,{disabled:!(g==null?void 0:g.id)})]})}function aa(e){const t=Re();return Y(()=>{t.current=e},[e]),t.current}function oa({billingAddress:e}){const t=z.country,r=je(t.key),n=z[r];return{card:m({name:z.cardHolder,number:z.cardNumber,exp_month:z.expMonth,exp_year:z.expYear,cvc:z.cardCvc},e&&{billing_address:{name:z.cardHolder,address1:z.address1,address2:z.address2,city:z.city,country:z.country,postal_code:n}})}}function sa({headers:e,includeCustomDataFeature:t,customCountries:r}){var c;const n=[],o=typeof e=="object"&&((c=Object.keys(e))==null?void 0:c.length),i=typeof window.vaultUrl=="string"&&window.vaultUrl.length;return t&&n.push(we.CUSTOM_DATA),o&&n.push(we.CUSTOM_HEADER),i&&n.push(we.CUSTOM_HOSTNAME),r&&n.push(we.CUSTOM_COUNTRIES),n.length&&n||void 0}const be=f({borderRadius:"$md",padding:"$3 $3 $5",backgroundColor:"$formBg","& .test":{color:"red"}}),It=f({border:0,padding:0,margin:0,minWidth:0,"&.disabled":{label:{background:"$fieldDisabledBg",span:{opacity:".5"},input:{opacity:".5"}}}});function ia({children:e,handleSubmit:t}){const{submit:r,dispatchSubmitAction:n,valid:o,fields:i,dispatchFieldAction:c}=W(ve),[h]=de(i),d=W($e),s=w(),l=aa(s.formStatus),[p,g]=de({}),{billingAddress:I,billingAddressConfiguration:N,isSavedCards:k,formStatus:$}=s;r.state,V.SUCCESS;const A=r.state===V.LOADING?"disabled":"";Y(()=>{function y(){c({type:"clearAll",value:h}),n({type:"reset"})}return M.on(_.ClearFields,y),()=>M.off(_.ClearFields,y)},[]);async function E(y,u){var nt,at,ot,st,it,ct,lt,dt,ut;function x(S){typeof(u==null?void 0:u.reply)=="function"&&u.reply(S)}const D=()=>{c({type:"valid"})};if(y&&y.preventDefault(),$===H.DEFAULT&&!o){x({success:!1,message:"Form is invalid"}),D();return}if(r.state===V.LOADING){x({success:!1,message:"Submit is in progress"});return}let T;const j=((nt=u==null?void 0:u.params)==null?void 0:nt.headers)||s.headers,_t=(ot=(at=u==null?void 0:u.params)==null?void 0:at.withCredentials)!=null?ot:s.withCredentials,Kt=((st=u==null?void 0:u.params)==null?void 0:st.submitPath)||s.submitPath,Wt=((it=u==null?void 0:u.params)==null?void 0:it.method)||s.method,Yt=((ct=u==null?void 0:u.params)==null?void 0:ct.hasCustomBodyCallback)||s.hasCustomBodyCallback;try{let S=(lt=u==null?void 0:u.params)==null?void 0:lt.data;!S&&Yt?S=await Ln():S||(S=oa({billingAddress:I})),T=$n(i,d,S)}catch(S){x({success:!1,message:S==null?void 0:S.message});return}(p==null?void 0:p.id)&&(T=m({},p));const rt=Date.now();n({type:"request-start"}),M.sendMessage({type:K.SubmitStart});const Zt=((dt=N==null?void 0:N.validCountries)==null?void 0:dt.length)||0,qt=sa({includeCustomDataFeature:((ut=u==null?void 0:u.params)==null?void 0:ut.data)||!!s.hasCustomBodyCallback,headers:j,customCountries:Zt>0});se({type:Q.BEFORE_SUBMIT,status:ee.OK,config:ue.PAYOPT,content:qt}),t({formStatus:$,isSavedCards:k,environment:s.environment,tenantId:s.tenantId,formState:i,path:Kt,method:Wt,body:T,headers:j,withCredentials:_t}).then(S=>{var ye;se({type:Q.SUBMIT,status:ee.OK,latency:Ze(rt)}),x({success:!0,data:S.data}),n({type:"request-success",response:S});let he;if(k&&$===H.DEFAULT){const Ee=$===H.DEFAULT,pt=((ye=i==null?void 0:i.saveCard)==null?void 0:ye.value)!=="false";pt&&se({type:Q.FIN_INSTRUMENT,status:ee.OK,config:ue.PAYOPT}),he={saveCardChecked:pt,preSavedCard:Ee}}else k&&(he={saveCardChecked:!1,preSavedCard:!0});M.sendMessage({type:K.SubmitSuccess,data:S.data,extra:he})}).catch(S=>{var he,ye,Ee;se({type:Q.SUBMIT,status:ee.FAILED,latency:Ze(rt),error:S.message,errorCode:(he=S.response)==null?void 0:he.status,statusText:(ye=S.response)==null?void 0:ye.statusText}),x({success:!1,error:S}),n({type:"request-failed",error:S}),M.sendMessage({type:K.SubmitFail,status:(Ee=S.response)==null?void 0:Ee.status})})}const O=An(E);Y(()=>{function y(u){O.current(null,u)}return M.on(_.SubmitSignal,y),()=>M.off(_.SubmitSignal,y)},[]);function re(y){s.preventSubmitOnEnter&&y.keyCode==13&&y.preventDefault()}switch(s.formStatus){case H.CARD_LIST:return a("form",{onSubmit:E,"data-testid":"form-card-list",children:a(wt,{formClassName:be({css:s.style.form}),setSavedCard:g})});case H.SUCCESS:return a(un,{formClassName:be({css:s.style.form})});case H.ERROR:return a(hn,{formClassName:be({css:s.style.form})});case H.LOADING:return l===H.CARD_LIST?a("form",{onSubmit:E,"data-testid":"form-card-list",children:a(wt,{formClassName:be({css:s.style.form}),setSavedCard:g})}):a("form",{onSubmit:E,onKeyDown:re,onKeyUp:re,className:be({css:s.style.form}),"data-testid":"form-loading",children:a("fieldset",{disabled:!0,className:`disabled ${It({css:s.style.fieldset})}`,children:e})});default:return a("form",{onSubmit:E,onKeyDown:re,onKeyUp:re,className:be({css:s.style.form}),"data-testid":"form-default",children:a("fieldset",{className:`${A} ${It({css:s.style.fieldset})}`,children:e})})}}const ca=e=>{const[,t]=De(d=>d+1,0),r=Re(null),{replace:n,append:o}=e,i=n?n(e.format(e.value)):e.format(e.value),c=Re(!1),h=d=>{const s=d.target;if(!U.PROD){if(s.type==="number"){console.error("Rifm does not support input type=number, use type=tel instead.");return}if(s.type==="date"){console.error("Rifm does not support input type=date.");return}}const l=s.value;if(r.current=[l,s,l.length>i.length,c.current,i===e.format(l)],U.PROD){const p=e.format(l);l!==p&&l.toLowerCase()===p.toLowerCase()&&console.warn("Case enforcement does not work with format. Please use replace={value => value.toLowerCase()} instead")}t(void 0)};return(U.PROD||typeof window!="undefined")&&$t(()=>{if(r.current==null)return;let[d,s,l,p,g]=r.current;r.current=null;const I=p&&g,k=d.slice(s.selectionStart).search(e.accept||/\d/g),$=k!==-1?k:0,L=y=>(y.match(e.accept||/\d/g)||[]).join(""),A=L(d.substr(0,s.selectionStart)),E=y=>{let u=0,x=0;for(let D=0;D!==A.length;++D){let T=y.indexOf(A[D],u)+1,j=L(y).indexOf(A[D],x)+1;j-x>1&&(T=u,j=x),x=Math.max(j,x),u=Math.max(u,T)}return u};if(e.mask===!0&&l&&!g){let y=E(d);const u=L(d.substr(y))[0];y=d.indexOf(u,y),d=`${d.substr(0,y)}${d.substr(y+1)}`}let O=e.format(d);o!=null&&s.selectionStart===d.length&&!g&&(l?O=o(O):L(O.slice(-1))===""&&(O=O.slice(0,-1)));const re=n?n(O):O;return i===re?t(void 0):e.onInput(re),()=>{let y=E(O);if(e.mask!=null&&(l||p&&!I))for(;O[y]&&L(O[y])==="";)y+=1;s.selectionStart=s.selectionEnd=y+(I?1+$:0)}}),Y(()=>{const d=l=>{l.code==="Delete"&&(c.current=!0)},s=l=>{l.code==="Delete"&&(c.current=!1)};return document.addEventListener("keydown",d),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",s)}},[]),{value:r.current!=null?r.current[0]:i,onInput:h}};function Z(e){const{submit:t,fields:r,dispatchFieldAction:n,dispatchSubmitAction:o}=W(ve),{[e]:{format:i,append:c,accept:h,isMask:d,replace:s}}=W($e),A=r[e],{value:p}=A,g=_e(A,["value"]);$t(()=>(n({type:"mount",field:e}),()=>{n({type:"unmount",field:e})}),[]);const I=E=>{t.state===V.FAILED&&o({type:"reset"}),n({type:"change",field:e,value:E})},N=()=>{n({type:"clear",field:e})},k=()=>{n({type:"focus",field:e})},$=()=>{n({type:"blur",field:e})},L=ca({value:p,append:c,accept:h,mask:d?d(p):!1,replace:s,format:i,onInput:I});return{meta:g,value:L.value,onInput:L.onInput,onBlur:$,onFocus:k,onClear:N,onChange:I}}const Me=f({"&::placeholder":{color:"$placeholder"},"&:focus":{"&::placeholder":{color:"transparent"}},color:"$input",fontFamily:"$base",fontSize:"$lg",background:"transparent",border:"none",outline:"none",padding:0,margin:0,lineHeight:"32px",width:"100%",letterSpacing:"0.2px"}),la=f({fill:"$placeholder",cursor:"pointer",position:"absolute",right:"20px",top:"21px"});function da({children:e,name:t}){const{onClear:r,value:n}=Z(t);return n?a("span",{onClick:r,className:la(),children:e}):null}const ua=()=>a("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 492 492",style:"enable-background:new 0 0 492 492;",width:"10",height:"10",children:a("g",{children:a("path",{d:"M300.188,246L484.14,62.04c5.06-5.064,7.852-11.82,7.86-19.024c0-7.208-2.792-13.972-7.86-19.028L468.02,7.872 c-5.068-5.076-11.824-7.856-19.036-7.856c-7.2,0-13.956,2.78-19.024,7.856L246.008,191.82L62.048,7.872 c-5.06-5.076-11.82-7.856-19.028-7.856c-7.2,0-13.96,2.78-19.02,7.856L7.872,23.988c-10.496,10.496-10.496,27.568,0,38.052 L191.828,246L7.872,429.952c-5.064,5.072-7.852,11.828-7.852,19.032c0,7.204,2.788,13.96,7.852,19.028l16.124,16.116 c5.06,5.072,11.824,7.856,19.02,7.856c7.208,0,13.968-2.784,19.028-7.856l183.96-183.952l183.952,183.952 c5.068,5.072,11.824,7.856,19.024,7.856h0.008c7.204,0,13.96-2.784,19.028-7.856l16.12-16.116 c5.06-5.064,7.852-11.824,7.852-19.028c0-7.204-2.792-13.96-7.852-19.028L300.188,246z"})})});function pe(e,t){return r=>b(ie,{children:[a(e,m({},r)),a(da,{name:t,children:a(ua,{})})]})}const pa=function(e){const{meta:t,value:r,onInput:n,onFocus:o,onBlur:i}=Z("cardNumber"),{valid:c}=t,h=v("cardNumber.placeholder"),{style:d}=w();return a("input",m({type:"text",id:"cardNumber",inputMode:"numeric",autoComplete:"cc-number","data-testid":"cc-number",value:r,onInput:n,onFocus:o,onBlur:i,placeholder:h,className:Me({css:d.baseInput}),"aria-invalid":!c},e))};var ha=pe(pa,"cardNumber");const ma=function(e){const{meta:t,value:r,onInput:n,onFocus:o,onBlur:i}=Z("cardCvc"),{valid:c}=t,h=v("cardCvc.placeholderCvv"),{style:d}=w();return a("input",m({type:"tel",id:"cardCvc","data-testid":"cc-cvc",inputMode:"numeric",value:r,onInput:n,onFocus:o,onBlur:i,placeholder:h,className:Me({css:d.baseInput}),"aria-invalid":!c},e))};var fa=pe(ma,"cardCvc");const ga=function(e){const{meta:t,value:r,onInput:n,onFocus:o,onBlur:i}=Z("cardExp"),{valid:c}=t,h=v("cardExp.placeholder"),{style:d}=w();return a("input",m({type:"text",id:"cardExp",inputMode:"numeric",autoComplete:"cc-exp","data-testid":"cc-exp",value:r,onInput:n,onFocus:o,onBlur:i,placeholder:h,className:Me({css:d.baseInput}),"aria-invalid":!c},e))};var ba=pe(ga,"cardExp");function Gt(...e){return e.reduce((r,n)=>{if(ze(n)){const o=Object.entries(n).filter(([i,c])=>Boolean(c)).map(([i])=>i);return`${r} ${o.join(" ")}`.trim()}else{if(Array.isArray(n))return`${r} ${Gt(...n)}`.trim();if(typeof n=="string")return`${r} ${n}`}return r},"").trim()}const Ca=f({fontSize:"$md",lineHeight:"$base",color:"$errorMessage",margin:0}),va=f({fontSize:"$md",lineHeight:"$base",color:"$errorMessage",margin:0,marginTop:"$3",textAlign:"center"});function ya(e){return e.dirty&&e.touched&&!e.valid&&Boolean(e.errorMessage)}function xa({errorMessage:e,erroredFieldName:t}){const{style:r}=w(),n=v(`${t}.label`),o=v(`errorMessages.${e}`,{fieldName:n});return a("p",{className:Ca({css:r.errorMessage}),children:o})}function Sa({errorMessage:e}){const{style:t}=w();return a("p",{className:va({css:t.errorMessage}),children:e})}function wa(e){const{fields:t}=W(ve),{id:r}=e;if([...Oe.card,...Oe.billingAddress].filter(i=>t[i]&&ya(t[i])).includes(r)){const i=t[r].localType||r,c=t[r].errorMessage;return a(xa,{errorMessage:c,erroredFieldName:i})}return a(ie,{})}function Ia(){const{submit:e}=W(ve);if(e.error&&e.state===V.FAILED){const r=e.error.message;return a(Sa,{errorMessage:r})}return a(ie,{})}const Na=f({display:"block",width:"auto",padding:"6px 12px 3px",boxSizing:"border-box",transition:"$base",willChange:"z-index, box-shadow",boxShadow:"$inputBorder",background:"$formControlBg",position:"relative",borderRadius:"$sm","input:-webkit-autofill, input:-webkit-autofill:hover, input:-webkit-autofill:focus, textarea:-webkit-autofill, textarea:-webkit-autofill:hover, textarea:-webkit-autofill:focus, select:-webkit-autofill, select:-webkit-autofill:hover, select:-webkit-autofill:focus":{border:"none","-webkit-text-fill-color":"initial","-webkit-box-shadow":"0 0 0px 1000px white inset"},variants:{focused:{true:{zIndex:3,boxShadow:"$inputBorderActive","& > span":{color:"$ctaButtonBg"}},false:{}},touched:{true:{}},valid:{true:{},false:{}},dirty:{true:{}}},compoundVariants:[{touched:"true",valid:"false",focused:"false",dirty:"true",css:{"& > span":{color:"$errorMessage"},boxShadow:"$inputBorderInvalid",zIndex:2}},{dirty:"true",valid:"true",css:{"& > span":{color:"$placeholder"}}}]}),Aa=f({width:"100%",minHeight:"82px"}),ka=f({fontSize:"$sm",lineHeight:"$3",height:"16px",textTransform:"uppercase",color:"$label",display:"flex",fontWeight:"$medium"}),$a=f({paddingRight:"$1",display:"inline-flex"});function La(e){const i=e,{errorMessage:t,mounted:r}=i,n=_e(i,["errorMessage","mounted"]),o=F(m({},n),{invalid:!e.valid});return Gt(o)}function oe({id:e,label:t,children:r,className:n}){const{meta:o}=Z(e),{style:i}=w(),c=Boolean(!o.valid&&o.dirty&&!o.focused);return b("div",{className:Aa(),children:[b("label",{htmlFor:e,className:`${Na(F(m({},o),{css:i.baseFormControl}))} ${n} ${La(o)}`,children:[b("span",{className:ka(),children:[c&&a("span",{className:$a(),children:a(Rt,{})}),t]}),r]}),a(wa,{id:e})]})}const Ma=function(e){const{meta:t,value:r,onInput:n,onFocus:o,onBlur:i}=Z("cardHolder"),{valid:c}=t,{style:h}=w(),d=v("cardHolder.placeholder");return a("input",m({id:"cardHolder","data-testid":"cardHolder",type:"text",autoComplete:"cc-name",value:r,onInput:n,onFocus:o,onBlur:i,placeholder:d,className:Me({css:h.baseInput}),"aria-invalid":!c},e))};var Ea=pe(Ma,"cardHolder");const Ba=()=>b("svg",{width:"100%",height:"100%",viewBox:"0 0 39 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("rect",{x:"0.5",y:"0.5",width:"38",height:"23",rx:"2.5",fill:"white",stroke:"#A8B3C1"}),a("rect",{x:"3",y:"12",width:"33",height:"2.25",rx:"1.125",fill:"#A8B3C1"}),a("rect",{x:"3",y:"16.5",width:"7.5",height:"2.25",rx:"1.125",fill:"#A8B3C1"}),a("rect",{x:"12",y:"16.5",width:"7.5",height:"2.25",rx:"1.125",fill:"#A8B3C1"}),a("rect",{x:"28.5",y:"16.5",width:"7.5",height:"4.5",rx:"0.5",fill:"#A8B3C1"}),a("rect",{x:"3",y:"3",width:"6.75",height:"5.25",rx:"0.5",fill:"#A8B3C1"})]}),Ta=()=>b("svg",{width:"100%",height:"100%",viewBox:"0 0 39 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("rect",{x:"0.5",y:"0.5",width:"38",height:"23",rx:"2.5",fill:"white",stroke:"#A8B3C1"}),a("circle",{cx:"22.5",cy:"15.75",r:"1.5",fill:"#579EFF"}),a("circle",{cx:"27",cy:"15.75",r:"1.5",fill:"#579EFF"}),a("circle",{cx:"31.5",cy:"15.75",r:"1.5",fill:"#579EFF"}),a("rect",{y:"4.5",width:"39",height:"3.75",fill:"#A8B3C1"}),a("rect",{x:"18.5",y:"12.5",width:"17",height:"6.5",rx:"1.5",stroke:"#579EFF"})]}),Fa=f({display:"flex",alignItems:"center"});function Nt({children:e,icons:t,type:r="card-number"}){const{cardNumber:n}=W($e),{value:o}=Z("cardNumber"),i={"card-number":()=>a(Ba,{}),cvc:()=>a(Ta,{})};return b("div",{className:Fa(),children:[a(jt,{value:n.cardType(o),icons:t,children:i[r]()}),e]})}const Da=f({borderRadius:"$sm"}),Ra=f({display:"flex",flexDirection:"row",width:"100%"}),Oa=f({width:"100%"}),Ua=f({width:"50%",marginRight:"$2"}),Pa=f({width:"50%",marginLeft:"$2","& + p":{marginLeft:"$2"}});function Ha(){const{style:e}=w(),t=v("cardHolder.label"),r=v("cardExp.label"),n=v("cardNumber.label"),o=v("cardCvc.label");return b(ie,{children:[a(oe,{id:"cardHolder",label:t,className:Oa({css:e.cardHolderControl}),children:a(Ea,{"aria-label":t})}),a(oe,{id:"cardNumber",label:n,className:Da({css:e.cardNumberControl}),children:a(Nt,{icons:Ne.CARD_ICONS,type:"card-number",children:a(ha,{"aria-label":n})})}),b("div",{className:Ra({css:e.cardCvcAndExpContainer}),children:[a(oe,{id:"cardExp",label:r,className:Ua({css:e.cardExpControl}),children:a(ba,{"aria-label":r})}),a(oe,{id:"cardCvc",label:o,className:Pa({css:e.cardCvcControl}),children:a(Nt,{icons:Ne.CVV_ICON_FRONT,type:"cvc",children:a(fa,{"aria-label":o})})})]})]})}function Ge({field:e,localType:t}){const{meta:r,value:n,onInput:o,onFocus:i,onBlur:c}=Z(e),{style:h}=w(),{valid:d}=r,s=v(`${t||e}.label`),l=v(`${t||e}.label`);return a("input",{id:e,"data-testid":e,type:"text",autoComplete:Un(e),value:n,onInput:o,onFocus:i,onBlur:c,placeholder:l,className:Me({css:h.baseInput}),"aria-invalid":!d,"aria-label":s})}const ja=f({color:"$input",fontFamily:"$base",fontSize:"$lg",border:"none",outline:"none",margin:0,lineHeight:"33px",width:"100%",backgroundImage:`
  linear-gradient(45deg, transparent 50%, $placeholder 50%), 
  linear-gradient(135deg, $placeholder 50%, transparent 50%)`,backgroundPosition:"calc(100% - 15px) 3px, calc(100% - 10px) 3px, 100% 0px",backgroundSize:"5px 5px, 5px 5px, 2.5em 2.5em",backgroundRepeat:"no-repeat","-webkit-appearance":"none","-moz-appearance":"none","text-indent":"1px",textOverflow:"",backgroundColor:"inherit"});function za({field:e,options:t,selected:r}){const{meta:n,onInput:o,onFocus:i,onBlur:c}=Z(e),{valid:h}=n,{style:d}=w(),s=v(`${e}.label`);return a("select",{id:e,"data-testid":e,autoComplete:tt[e],onInput:o,onFocus:i,onBlur:c,className:ja({css:d.baseInput}),"aria-invalid":!h,"aria-label":s,children:Object.keys(t).map(l=>a("option",{value:l,selected:l===r,children:t[l]}))})}const Ga=f({display:"flex","div + div":{marginLeft:"$3"}}),Va=f({}),_a=f({"& + p":{marginLeft:"$2"}}),Ka=pe(()=>a(Ge,{field:"address1"}),"address1"),Wa=pe(()=>a(Ge,{field:"address2"}),"address2"),Ya=pe(()=>a(Ge,{field:"city"}),"city"),Za=pe(({type:e})=>a(Ge,{field:"postalCode",localType:e}),"postalCode");function Vt(e){return Object.keys(e).forEach(t=>{typeof e[t]=="object"&&!Array.isArray(e[t])&&(e[t]=Vt(e[t])),typeof e[t]=="string"&&(e[t]=e[t]==="true"),e[t]=e[t]}),e}function qa(){var N,k,$,L,A;const{value:e}=Z("country"),{style:t,billingAddress:r,billingAddressConfiguration:n}=w(),o=v("country.label"),i=v("address1.label"),c=v("address2.label"),h=v("city.label"),d=je(e),s=v(`${d}.label`);let l=[],p={};n&&(l=n.validCountries||[],p=Vt(n));const g=Lt(l),I=et(n);return a(ie,{children:r?b("div",{children:[(((N=p==null?void 0:p.country)==null?void 0:N.visible)!==!1||!n)&&a(oe,{id:"country",label:o,children:a(za,{field:"country",options:g,selected:I})}),b(ie,{children:[(((k=p==null?void 0:p.address1)==null?void 0:k.visible)!==!1||!n)&&a(oe,{id:"address1",label:i,children:a(Ka,{})}),((($=p==null?void 0:p.address2)==null?void 0:$.visible)!==!1||!n)&&a(oe,{id:"address2",label:c,children:a(Wa,{})}),b("div",{className:Ga({css:t.cityAndPostalCodeContainer}),children:[(((L=p==null?void 0:p.city)==null?void 0:L.visible)!==!1||!n)&&a(oe,{id:"city",label:h,className:Va({css:t.cityControl}),children:a(Ya,{})}),(((A=p==null?void 0:p.postalCode)==null?void 0:A.visible)!==!1||!n)&&a(oe,{id:"postalCode",label:s,className:_a({css:t.postalCodeControl}),children:a(Za,{type:d})})]})]})]}):""})}const Ja=()=>b("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a("path",{d:"M19 12H5",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),a("path",{d:"M12 19L5 12L12 5",stroke:"black","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]}),Xa=f({display:"flex",alignItems:"center",fontSize:"17px",color:"$label",marginBottom:"$4",marginTop:"$3","& span":{"&:last-child":{width:"100%",textAlign:"center"},"&:first-child":{cursor:"pointer",textAlign:"center","&:hover":{opacity:"0.7"}}}});function Qa(){const{style:e,isSavedCards:t,updateConfig:r,cardsList:n}=w(),o=v("form.backLabel"),i=()=>{r({params:{formStatus:H.CARD_LIST}})};return t&&(n==null?void 0:n.length)?b("div",{className:Xa({css:e.saveCardTitleControl}),children:[a("span",{onClick:i,children:a(Ja,{})}),a("span",{children:o})]}):null}const eo=f({color:"$input",fontFamily:"$base",background:"transparent",border:"none",outline:"none",padding:0,margin:0,lineHeight:"32px",letterSpacing:"0.2px",width:"18px",height:"18px",marginRight:"10px",cursor:"pointer"}),to=f({display:"flex",alignItems:"center",justifyContent:"center","& > label:hover ":{opacity:"0.8"},"& label":{cursor:"pointer",fontSize:"$3",fontWeight:"$medium"},marginBottom:"25px"}),ro=function({field:e}){const{meta:t,value:r="true",onChange:n,onFocus:o,onBlur:i}=Z(e),{valid:c}=t,{style:h,isSaveCardOptionEnabled:d}=w(),s=v(`${e}.label`),l=p=>{var g;n(String((g=p==null?void 0:p.target)==null?void 0:g.checked))};return b("div",{className:to({css:h.saveCardCheckboxControl}),children:[a("input",{type:"checkbox",id:e,autoComplete:tt[e],defaultChecked:d,onChange:l,onFocus:o,onBlur:i,className:eo({css:h.baseCheckbox}),"aria-invalid":!c}),a("label",{htmlFor:e,children:s})]})},At=f({fontWeight:"$normal",padding:"$0",fontSize:"15px",lineHeight:"$4",color:"$label",letterSpacing:"0.4px",marginBottom:"$3"});function no(){const{style:e,billingAddress:t,isSavedCards:r}=w(),n=v("form.cardLabel"),o=v("form.billingAddressLabel");return b(ie,{children:[a(Qa,{}),b("div",{children:[a("legend",{className:At({css:e.legend}),children:n}),a(Ha,{})]}),t?a("div",{children:b(ie,{children:[a("legend",{className:At({css:e.legend}),children:o}),a(qa,{})]})}):"",r&&a(ro,{field:"saveCard"})]})}let Je=null;function Ae(e){Je=e}M.on(_.SetInitialParams,Ae);M.on(_.UpdateParams,Ae);M.on(_.ClearFields,Ae);function ao({children:e,initialConfig:t}){const[r,n]=de(t!=null?t:Le),o={customMerge:()=>(h,d)=>{var s;return ze(d)&&((s=Object.keys(d))==null?void 0:s.length)===0||Array.isArray(d)?d:We(h,d,o)}},i=h=>{(h==null?void 0:h.params)&&n(d=>We(d,F(m({},h.params),{configResolved:!0}),o))},c=Ie(()=>F(m({},r),{updateConfig:i}),[r]);return Y(()=>{M.on(_.SetInitialParams,i),M.on(_.UpdateParams,i),M.off(_.SetInitialParams,Ae),M.off(_.UpdateParams,Ae),Je&&i(Je)},[]),a(Bt.Provider,{value:c,children:e})}const oo=e=>{e.forEach(t=>{const r=document.createElement("link");r.setAttribute("rel","prefetch"),r.setAttribute("href",`${U.iconsUrl}/${t}.svg`),document.head.appendChild(r)})};let Fe;const me=class{};let q=me;ce(q,"initialize",(t,r)=>{U.DEV||(Fe=new Cr({accessToken:U.rollbarAccessToken,captureUncaught:!0,captureUnhandledRejections:!0,scrubTelemetryInputs:!0,ignoredMessages:["ResizeObserver loop limit exceeded"],payload:{environment:r,person:{id:t},client:{javascript:{source_map_enabled:!0}}}}))}),ce(q,"trackEvent",(t,...r)=>{try{if(!Fe)return;if(!(typeof Fe[t]=="function")){console.error("You provided invalid log level when capturing an error");return}Fe[t](...r)}catch(n){console.error(`An error occurred while capturing a ${t} error.`,n)}}),ce(q,"critical",(...t)=>me.trackEvent("critical",...t)),ce(q,"error",(...t)=>me.trackEvent("error",...t)),ce(q,"warning",(...t)=>me.trackEvent("warning",...t)),ce(q,"debug",(...t)=>me.trackEvent("debug",...t)),ce(q,"info",(...t)=>me.trackEvent("info",...t));function so(){const{height:e,ref:t}=vr({handleWidth:!1}),r=Ie(()=>({height:e,ref:t}),[e,t]),n=o=>{o.message==="ResizeObserver loop limit exceeded"&&(o.stopPropagation(),o.stopImmediatePropagation())};return Y(()=>(window.addEventListener("error",n),()=>{window.removeEventListener("error",n)}),[]),r}const{tenantId:io,environment:co,createdAt:kt}=Le(),lo=f({visibility:"hidden",fontFamily:"$base",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased",variants:{configResolved:{true:{visibility:"visible"}}}});M.sendMessage({type:K.JsLoaded});U.DEV||q.initialize(io,co);oo([...Object.values(Ne.CARD_ICONS),"cvv-front"]);function uo(){const{height:e,ref:t}=so();Y(()=>{M.sendMessage({type:K.AppMounted}),se({type:Q.INIT,status:ee.OK,config:ue.PAYOPT,createdAt:parseInt(kt,10),latency:Ze(kt)})},[]),xr(i=>{q.error(i.message)});const{theme:r,configResolved:n,style:o}=w();return Y(()=>{e&&M.sendMessage({type:K.WindowHeightChange,height:e})},[e]),o.global&&_r(o.global)(),a("div",{className:`${lo({configResolved:n,css:o.root})} ${Vr(r!=null?r:{})}`,ref:t,children:a(Gr,{children:b(ia,{handleSubmit:Wn,children:[a(no,{}),a(Ht,{}),a(Ia,{})]})})})}const po=document.getElementById("app");yr(a(ao,{children:a(uo,{})}),po);
